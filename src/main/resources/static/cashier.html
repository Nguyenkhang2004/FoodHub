<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Cashier Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* styles.css */ .invoice { display: none; /* Ban ƒë·∫ßu ·∫©n, ƒë·ªÉ JavaScript ki·ªÉm so√°t */ width: 100%; max-width: 800px; margin: 0 auto; font-family: Arial, sans-serif; } .invoice-header, .invoice-body, .invoice-footer { padding: 10px; } /* ƒê·∫£m b·∫£o c√°c ph·∫ßn t·ª≠ con hi·ªÉn th·ªã */ .invoice * { visibility: visible; /* Kh√¥ng d√πng !important ƒë·ªÉ tr√°nh xung ƒë·ªôt */ } <!----> .revenue-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 20px; padding: 10px; } .stat-card { background-color: white; border-radius: 12px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08); padding: 16px 20px; transition: transform 0.2s ease; border-left: 6px solid #FFA500; /* vi·ªÅn m√†u cam tr√°i */ } .stat-card:hover { transform: translateY(-4px); } .stat-card h4 { margin: 0 0 8px; font-size: 16px; font-weight: 600; color: #333; } .stat-card .value { font-size: 20px; font-weight: bold; color: #FF6600; } .action-buttons { display: flex; flex-direction: column; /* D·ªçc xu·ªëng */ gap: 8px; /* Kho·∫£ng c√°ch gi·ªØa n√∫t tr√™n v√† d∆∞·ªõi */ align-items: flex-start; /* CƒÉn tr√°i c√°c n√∫t */ } .action-btn { padding: 8px 14px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 14px; width: 100%; /* N√∫t d√†i ƒë·ªÅu nhau n·∫øu c·∫ßn */ max-width: 150px; } /* Style ri√™ng cho t·ª´ng n√∫t */ .process-btn { background-color: #4CAF50; color: white; } .cancel-btn { background-color: #f44336; color: white; } //================= .result-info { background-color: #f0f9ff; border: 1px solid #a3d8ff; border-radius: 8px; padding: 16px; margin-top: 10px; font-family: Arial, sans-serif; line-height: 1.6; color: #333; } .result-info p { margin: 8px 0; } .result-info span { font-weight: bold; color: #007acc; } /* Gi·ªØ nguy√™n c√°c style hi·ªán t·∫°i */ :root { --primary: #FEA116; --light: #F1F8FF; --dark: #0F172B; --success: #10B981; --warning: #F59E0B; --danger: #EF4444; --info: #3B82F6; --gradient-primary: linear-gradient(135deg, #FEA116, #ff8c00); --gradient-dark: linear-gradient(135deg, #0F172B, #1e293b); } * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Nunito', sans-serif; background-color: var(--light); line-height: 1.6; } /* Sidebar Styles */ .sidebar { position: fixed; top: 0; left: 0; height: 100vh; width: 280px; background: var(--dark); transition: all 0.3s ease; z-index: 1000; overflow-y: auto; box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1); } .sidebar.collapsed { width: 70px; } .sidebar .brand { padding: 2rem 1.5rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); text-align: center; } .sidebar .brand h3 { color: var(--primary); margin: 0; font-family: 'Pacifico', cursive; font-size: 1.5rem; } .sidebar .brand .subtitle { color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; margin-top: 0.5rem; } .sidebar-nav { padding: 1rem 0; flex: 1; } .nav-item { margin-bottom: 0.5rem; } .nav-link { display: flex; align-items: center; padding: 1rem 1.5rem; color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: all 0.3s ease; cursor: pointer; border: none; background: none; width: 100%; text-align: left; font-size: 1rem; } .nav-link:hover, .nav-link.active { background: rgba(254, 161, 22, 0.1); color: var(--primary); transform: translateX(5px); } .nav-link i { width: 20px; margin-right: 1rem; text-align: center; font-size: 1.1rem; } /* Main Content */ .main-content { margin-left: 280px; transition: all 0.3s ease; min-height: 100vh; } .main-content.expanded { margin-left: 70px; } /* Top Bar */ .top-bar { background: #fff; padding: 1rem 2rem; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 999; } .top-bar h1 { color: var(--dark); font-weight: 700; font-size: 1.8rem; } .user-info { display: flex; align-items: center; gap: 1rem; color: var(--dark); font-weight: 600; } .toggle-sidebar { background: none; border: none; color: var(--dark); font-size: 1.5rem; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: all 0.3s ease; } .toggle-sidebar:hover { background: var(--light); } /* Enhanced Carousel */ .carousel { position: relative; margin: 2rem; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); height: 400px; /* TƒÉng k√≠ch th∆∞·ªõc cho Home */ } .carousel-item { display: none; position: relative; width: 100%; height: 100%; } .carousel-item.active { display: block; } .carousel-item img { width: 100%; height: 100%; object-fit: cover; } .carousel-text { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0, 0, 0, 0.8)); color: white; padding: 2rem; font-size: 1.5rem; font-weight: 700; } .carousel-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255, 255, 255, 0.9); border: none; width: 50px; height: 50px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); } .carousel-arrow:hover { background: white; transform: translateY(-50%) scale(1.1); } .carousel-arrow.prev { left: 20px; } .carousel-arrow.next { right: 20px; } .carousel-nav { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; } .nav-dot { width: 12px; height: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.5); cursor: pointer; transition: all 0.3s ease; } .nav-dot.active { background: var(--primary); transform: scale(1.2); } /* Navigation Buttons */ .nav-buttons { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; padding: 2rem; } .nav-buttons button { background: var(--gradient-primary); border: none; padding: 1.5rem; border-radius: 15px; color: white; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(254, 161, 22, 0.3); } .nav-buttons button:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(254, 161, 22, 0.4); } .nav-buttons button.active { background: var(--gradient-dark); } /* Messages */ .success, .error { margin: 1rem 2rem; padding: 1rem; border-radius: 10px; font-weight: 600; display: none; } .success { background: rgba(16, 185, 129, 0.1); color: var(--success); border: 1px solid var(--success); } .error { background: rgba(239, 68, 68, 0.1); color: var(--danger); border: 1px solid var(--danger); } /* Sections */ .section { display: none; margin: 2rem; background: white; border-radius: 20px; padding: 2rem; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); } .section.active { display: block; } .section h2 { color: var(--dark); font-weight: 700; margin-bottom: 2rem; font-size: 1.8rem; } /* Form Styles */ .form-container { background: linear-gradient(135deg, #fff, #f8fafc); border-radius: 20px; padding: 2rem; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08); margin-bottom: 2rem; } .form-header { text-align: center; margin-bottom: 2rem; } .form-header h1 { color: var(--dark); font-weight: 700; margin-bottom: 0.5rem; } .form-header p { color: #64748b; font-size: 1rem; } .form-group { margin-bottom: 1.5rem; } label { display: block; margin-bottom: 0.5rem; color: var(--dark); font-weight: 600; } .input-wrapper { position: relative; } .form-input, input, select { width: 100%; padding: 1rem; border: 2px solid #e2e8f0; border-radius: 12px; font-size: 1rem; transition: all 0.3s ease; background: white; } .form-input:focus, input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(254, 161, 22, 0.1); } .input-wrapper .icon { position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); color: var(--primary); pointer-events: none; } /* Quick Select Buttons */ .quick-select { margin: 2rem 0; } .quick-select h3 { color: var(--dark); margin-bottom: 1rem; font-weight: 600; } .quick-buttons { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; } .quick-btn { background: rgba(254, 161, 22, 0.1); border: 2px solid var(--primary); padding: 0.8rem; border-radius: 10px; color: var(--primary); font-weight: 600; cursor: pointer; transition: all 0.3s ease; } .quick-btn:hover { background: var(--primary); color: white; transform: translateY(-2px); } /* Submit Button */ .submit-btn, button[type="button"] { background: var(--gradient-primary); border: none; padding: 1rem 2rem; border-radius: 12px; color: white; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; width: 100%; margin-top: 1rem; } .submit-btn:hover, button[type="button"]:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(254, 161, 22, 0.4); } /* Table Styles */ table { width: 100%; border-collapse: collapse; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); margin-top: 2rem; } th, td { padding: 1rem; text-align: left; border-bottom: 1px solid #e2e8f0; } th { background: var(--gradient-primary); color: white; font-weight: 600; } tr:hover { background: rgba(254, 161, 22, 0.05); } /* Error Messages */ .error-message { color: var(--danger); font-size: 0.9rem; margin-top: 0.5rem; display: none; } /* Responsive Design */ @media (max-width: 768px) { .sidebar { transform: translateX(-100%); } .sidebar.show { transform: translateX(0); } .main-content { margin-left: 0; } .nav-buttons { grid-template-columns: 1fr; padding: 1rem; } .quick-buttons { grid-template-columns: 1fr; } .carousel { height: 200px; margin: 1rem; } .section { margin: 1rem; padding: 1rem; } } /* Loading Animation */ .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top-color: white; animation: spin 1s ease-in-out infinite; } @keyframes spin { to { transform: rotate(360deg); } } /* Ph·∫ßn .nav-link khi thu h·∫πp */ .sidebar.collapsed .nav-link span { display: none; /* ·∫®n text khi sidebar thu h·∫πp */ } .sidebar.collapsed .nav-link i { margin-right: 0; /* Lo·∫°i b·ªè margin khi ch·ªâ c√≥ icon */ } .sidebar.collapsed .nav-link { justify-content: center; /* CƒÉn gi·ªØa icon */ padding: 1rem; /* Gi·∫£m padding ƒë·ªÉ ti·∫øt ki·ªám kh√¥ng gian */ transition: all 0.3s ease; /* Hi·ªáu ·ª©ng m∆∞·ª£t m√† */ } /* Ph·∫ßn .brand khi thu h·∫πp v√† m·ªü r·ªông */ .sidebar .brand h3 { display: flex; justify-content: center; align-items: center; transition: all 0.3s ease; } .sidebar .brand .brand-icon { color: var(--primary); /* M√†u cam #FEA116 */ font-size: 1.5rem; transition: all 0.3s ease; } .sidebar .brand .brand-text { margin-left: 0.5rem; /* Kho·∫£ng c√°ch gi·ªØa icon v√† text */ color: var(--primary); /* M√†u cam cho text khi m·ªü r·ªông */ transition: all 0.3s ease; } .sidebar .brand .subtitle { color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; margin-top: 0.5rem; text-align: center; transition: all 0.3s ease; } .sidebar.collapsed .brand .brand-text { display: none; /* ·∫®n text "FoodHub" */ } .sidebar.collapsed .brand .subtitle { display: none; /* ·∫®n "Cashier System" */ } .sidebar.collapsed .brand .brand-icon { color: var(--primary); /* M√†u cam khi thu h·∫πp */ font-size: 1.5rem; margin: 0; text-align: center; display: block; /* Hi·ªÉn th·ªã icon */ transition: all 0.3s ease; /* Hi·ªáu ·ª©ng m∆∞·ª£t m√† */ } /* Ph·∫ßn .main-content */ .main-content.expanded { margin-left: 70px; /* ƒêi·ªÅu ch·ªânh margin khi sidebar thu h·∫πp */ transition: all 0.3s ease; /* Hi·ªáu ·ª©ng m∆∞·ª£t m√† */ } .invoice { max-width: 600px; margin: 2rem auto; background: white; border-radius: 20px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); overflow: hidden; border: 2px solid #e2e8f0; position: relative; } /* Invoice Header */ .invoice-header { background: var(--gradient-primary); color: white; padding: 2rem; text-align: center; position: relative; } .invoice-header::before { content: 'üßæ'; font-size: 3rem; display: block; margin-bottom: 0.5rem; opacity: 0.9; } .invoice-header h3 { font-size: 1.8rem; font-weight: 700; margin: 0; font-family: 'Pacifico', cursive; } .invoice-header .invoice-subtitle { font-size: 1rem; opacity: 0.9; margin-top: 0.5rem; } /* Invoice Body */ .invoice-body { padding: 2rem; } /* Invoice Info Grid */ .invoice-info { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem; padding: 1.5rem; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border-radius: 15px; border-left: 4px solid var(--primary); } .invoice-info-left, .invoice-info-right { display: flex; flex-direction: column; gap: 0.8rem; } .invoice-info p { margin: 0; display: flex; align-items: center; color: var(--dark); font-weight: 500; } .invoice-info strong { color: var(--primary); font-weight: 700; margin-right: 0.5rem; min-width: 100px; } .invoice-info span { color: var(--dark); font-weight: 600; } /* Invoice Table */ .invoice-table-wrapper { margin: 2rem 0; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); border: 1px solid #e2e8f0; } #invoiceTable { width: 100%; border-collapse: collapse; margin: 0; box-shadow: none; } #invoiceTable th { background: var(--gradient-dark); color: white; padding: 1.2rem 1rem; font-weight: 600; text-align: center; font-size: 0.95rem; } #invoiceTable td { padding: 1rem; text-align: center; border-bottom: 1px solid #f1f5f9; font-weight: 500; color: var(--dark); } #invoiceTable tbody tr:nth-child(even) { background: #f8fafc; } #invoiceTable tbody tr:hover { background: rgba(254, 161, 22, 0.05); transform: scale(1.01); transition: all 0.2s ease; } /* Invoice Summary */ .invoice-summary { background: linear-gradient(135deg, #fff, #f8fafc); border-radius: 15px; padding: 1.5rem; margin: 2rem 0; border: 2px solid var(--primary); position: relative; } .invoice-summary::before { content: 'üí∞'; position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: white; padding: 0 10px; font-size: 1.5rem; } .invoice-total { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding: 1rem; background: var(--gradient-primary); color: white; border-radius: 10px; font-size: 1.3rem; font-weight: 700; } .invoice-details { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem; } .invoice-detail-item { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem; background: white; border-radius: 8px; border-left: 3px solid var(--primary); } .invoice-detail-item strong { color: var(--dark); font-weight: 600; } .invoice-detail-item span { color: var(--primary); font-weight: 700; } /* Status Badge */ .status-badge { display: inline-block; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; font-size: 0.9rem; text-transform: uppercase; } .status-success { background: rgba(16, 185, 129, 0.15); color: var(--success); border: 1px solid var(--success); } .status-pending { background: rgba(245, 158, 11, 0.15); color: var(--warning); border: 1px solid var(--warning); } /* Payment Method Badge */ .payment-badge { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; font-size: 0.9rem; background: rgba(59, 130, 246, 0.15); color: var(--info); border: 1px solid var(--info); } /* Invoice Footer */ .invoice-footer { background: var(--gradient-dark); color: white; padding: 1.5rem; text-align: center; font-size: 0.95rem; line-height: 1.8; } .invoice-footer strong { color: var(--primary); font-size: 1.1rem; } /* Download Button */ .download-btn { background: var(--gradient-primary); border: none; padding: 1rem 2rem; border-radius: 12px; color: white; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin: 1.5rem auto 0; display: block; min-width: 200px; box-shadow: 0 5px 15px rgba(254, 161, 22, 0.3); } .download-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(254, 161, 22, 0.4); } .download-btn i { margin-right: 0.5rem; } /* Print Styles */ @media print { .invoice { box-shadow: none; border: 1px solid #ccc; margin: 0; max-width: none; } .download-btn { display: none; } } /* Responsive */ @media (max-width: 768px) { .invoice { margin: 1rem; max-width: none; } .invoice-info { grid-template-columns: 1fr; gap: 1rem; } .invoice-details { grid-template-columns: 1fr; } .invoice-total { font-size: 1.1rem; } #invoiceTable th, #invoiceTable td { padding: 0.8rem 0.5rem; font-size: 0.9rem; } } /* Animation */ .invoice.show { animation: slideInUp 0.5s ease-out; } @keyframes slideInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
.filter-container { margin: 20px 0; padding: 15px; background-color: #f9f9f9; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); } .filter-container .input-wrapper { display: flex; align-items: center; margin-bottom: 10px; } .filter-btn { padding: 10px 15px; background-color: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; } .filter-btn:hover { background-color: #5a6268; } .filter-menu { display: none; position: absolute; background: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 1000; padding: 5px 0; min-width: 120px; } .filter-item { padding: 5px 10px; cursor: pointer; } .filter-item:hover { background-color: #f0f0f0; }
.search-input-group { display: flex; align-items: center; gap: 10px; } .input-wrapper { position: relative; width: 100%; } .form-input { width: 100%; box-sizing: border-box; } .suggestions { position: absolute; top: 100%; left: 0; width: 100%; max-height: 150px; overflow-y: auto; background: white; border: 1px solid #ccc; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); } .suggestion-item { padding: 5px 10px; cursor: pointer; } .suggestion-item:hover { background: #f0f0f0; } .submit-btn { padding: 10px 20px; background-color: #ff9800; color: white; border: none; border-radius: 5px; cursor: pointer; } .submit-btn:hover { background-color: #e68a00; }

    .filter-menu { display: none; position: absolute; background: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 1000; padding: 5px 0; } .filter-item { padding: 5px 10px; cursor: pointer; } .filter-item:hover { background-color: #f0f0f0; } .action-buttons .filter-btn { margin-right: 5px; padding: 5px 10px; background-color: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; } .action-buttons .filter-btn:hover { background-color: #5a6268; } .filter-container-inline { position: relative; display: inline-block; } .filter-menu { display: none; position: absolute; background: #fff; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 1000; padding: 5px 0; min-width: 120px; } .filter-item { padding: 5px 10px; cursor: pointer; } .filter-item:hover { background-color: #f0f0f0; } .action-buttons .filter-btn { margin-right: 5px; padding: 5px 10px; background-color: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; } .action-buttons .filter-btn:hover { background-color: #5a6268; }
  </style>
</head>

<body>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="brand">
    <h3><span class="brand-icon">üç¥</span><span class="brand-text">FoodHub</span></h3>
    <div class="subtitle">Cashier System</div>
  </div>
  <nav class="sidebar-nav">
    <div class="nav-item">
      <button class="nav-link" onclick="showSection('home')" id="sidebarHome">
        <i class="fas fa-home"></i><span>Home</span>
      </button>
    </div>
    <div class="nav-item">
      <button class="nav-link" onclick="showSection('payment')" id="sidebarPayment">
        <i class="fas fa-credit-card"></i><span>Process Payment</span>
      </button>
    </div>
    <div class="nav-item">
      <button class="nav-link" onclick="showSection('cancel')" id="sidebarCancel">
        <i class="fas fa-times-circle"></i><span>Cancel/Refund</span>
      </button>
    </div>
    <div class="nav-item">
      <button class="nav-link" onclick="showSection('transactions')" id="sidebarTransactions">
        <i class="fas fa-list-alt"></i><span>Transactions</span>
      </button>
    </div>
    <div class="nav-item">
      <button class="nav-link" onclick="showSection('revenue')" id="sidebarRevenue">
        <i class="fas fa-chart-line"></i><span>Revenue</span>
      </button>
    </div>
  </nav>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
  <!-- Top Bar -->
  <div class="top-bar">
    <div style="display: flex; align-items: center; gap: 1rem;">
      <button class="toggle-sidebar" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
      <h1>üõí Cashier Dashboard</h1>
    </div>
    <div class="user-info">
      <span>üë§ Cashier: Hu·ª≥nh Ti·∫øn D√™</span>
      <span>|</span>
      <span id="current-time"></span>
    </div>
  </div>

  <!-- Enhanced Carousel -->
  <div class="carousel">
    <div class="carousel-item active">
      <img src="images/pho-nha-lam.jpg" alt="Ph·ªü B√≤ Th∆°m Ngon">
      <div class="carousel-text">üçú Ph·ªü B√≤ Th∆°m Ngon</div>
    </div>
    <div class="carousel-item">
      <img src="images/42c930c5-2a1a-429c-a002-eb2c57d700f5.jpg" alt="C∆°m T·∫•m S∆∞·ªùn N∆∞·ªõng">
      <div class="carousel-text">üçñ C∆°m T·∫•m S∆∞·ªùn N∆∞·ªõng</div>
    </div>
    <div class="carousel-item">
      <img src="images/top-1-mon-sandwich-ngon-nhat-the-gioi-goi-ten-banh-my-viet-nam1710498007-182420240316092132.jpg" alt="B√°nh M√¨ VN">
      <div class="carousel-text">ü•ñ B√°nh M√¨ Vi·ªát Nam</div>
    </div>
    <div class="carousel-item">
      <img src="images/bunbohue.jpg" alt="B√∫n B√≤ Hu·∫ø">
      <div class="carousel-text">üå∂Ô∏è B√∫n B√≤ Hu·∫ø</div>
    </div>
    <button class="carousel-arrow prev" onclick="prevSlide()">‚Äπ</button>
    <button class="carousel-arrow next" onclick="nextSlide()">‚Ä∫</button>
    <div class="carousel-nav">
      <div class="nav-dot active" onclick="currentSlide(1)"></div>
      <div class="nav-dot" onclick="currentSlide(2)"></div>
      <div class="nav-dot" onclick="currentSlide(3)"></div>
      <div class="nav-dot" onclick="currentSlide(4)"></div>
    </div>
  </div>

  <!-- Messages -->
  <div id="message" class="success"></div>
  <div id="error" class="error"></div>

  <!-- Home Section -->
  <div class="section active" id="homeSection"></div>

  <!-- Payment Section -->
  <div class="section" id="paymentSection">
    <h2>üí≥ Process Payment</h2>
    <div class="form-container">
      <div class="form-header">
        <h1>üí∞ Payment Processing</h1>
        <p>Enter order details to process payment</p>
      </div>
      <form id="paymentForm">
        <div class="form-group">
          <label for="paymentOrderId">üÜî Order ID</label>
          <div class="input-wrapper">
            <input type="number" id="paymentOrderId" class="form-input" required placeholder="Enter order ID">
            <span class="icon">üÜî</span>
          </div>
          <div class="error-message" id="paymentOrderIdError"></div>
        </div>
        <div class="form-group">
          <label for="paymentMethod">üí∞ Payment Method</label>
          <select id="paymentMethod" class="form-input" required>
            <option value="CASH">üíµ CASH</option>
            <option value="VNPAY">üì± VNPAY</option>
          </select>
          <div class="error-message" id="paymentMethodError"></div>
        </div>
        <button id="paymentBtn" type="button" class="submit-btn">‚ú® Process Payment</button>
      </form>
    </div>
    <div id="paymentResult"></div>
    <div id="invoice" class="invoice" style="display: none;">
      <div class="invoice-header">
        <h3>H√ìA ƒê∆†N THANH TO√ÅN</h3>
        <div class="invoice-subtitle">FoodHub Restaurant</div>
      </div>
      <div class="invoice-body">
        <div class="invoice-info">
          <div class="invoice-info-left">
            <p><strong>üÜî S·ªë Hƒê:</strong> <span id="invoiceId"></span></p>
            <p><strong>üìÖ Ng√†y:</strong> <span id="paymentDate"></span></p>
            <p><strong>üçΩÔ∏è B√†n:</strong> <span id="tableNumber"></span></p>
          </div>
          <div class="invoice-info-right">
            <p><strong>üë§ Kh√°ch:</strong> <span id="customerName"></span></p>
            <p><strong>üìß Email:</strong> <span id="displayCustomerEmail"></span></p>
            <p><strong>üîó M√£ GD:</strong> <span id="transactionId"></span></p>
          </div>
        </div>
        <div class="invoice-table-wrapper">
          <table id="invoiceTable">
            <thead>
            <tr>
              <th>üçΩÔ∏è T√™n m√≥n ƒÉn</th>
              <th>üìä S·ªë l∆∞·ª£ng</th>
              <th>üí∞ Gi√° ƒë∆°n v·ªã</th>
              <th>üíµ T·ªïng ti·ªÅn</th>
            </tr>
            </thead>
            <tbody id="invoiceItems"></tbody>
          </table>
        </div>
        <div class="invoice-summary">
          <div class="invoice-total">
            <span>üí∞ T·ªîNG C·ªòNG:</span>
            <span id="totalAmount"></span>
          </div>
          <div class="invoice-details">
            <div class="invoice-detail-item">
              <strong>üí≥ Ph∆∞∆°ng th·ª©c:</strong>
              <span class="payment-badge" id="paymentMethodDisplay"></span>
            </div>
            <div class="invoice-detail-item">
              <strong>üìä Tr·∫°ng th√°i:</strong>
              <span class="status-badge status-success" id="status"></span>
            </div>
          </div>
        </div>
      </div>
      <div class="invoice-footer">
        <strong>üç¥ FoodHub Restaurant</strong><br>
        Chuy√™n m√≥n l·∫©u v√† n∆∞·ªõng<br>
        üìû Hotline: 1900-1234 | üåê www.foodhub.vn<br>
        <em>C·∫£m ∆°n qu√Ω kh√°ch ƒë√£ s·ª≠ d·ª•ng d·ªãch v·ª•!</em>
        <button id="downloadBtn" class="submit-btn" style="display: none;">üì• T·∫£i H√≥a ƒê∆°n</button>
      </div>
    </div>
  </div>

  <!-- Cancel/Refund Section -->
  <div class="section" id="cancelSection">
    <h2>‚ùå Cancel or Refund Order</h2>
    <div class="form-container">
      <div class="form-header">
        <h1>üîÑ Order Cancellation</h1>
        <p>Enter order ID to cancel or refund</p>
      </div>
      <form id="cancelForm">
        <div class="form-group">
          <label for="cancelOrderId">üÜî Order ID</label>
          <div class="input-wrapper">
            <input type="number" id="cancelOrderId" class="form-input" required placeholder="Enter order ID to cancel">
            <span class="icon">üÜî</span>
          </div>
          <div class="error-message" id="cancelOrderIdError"></div>
        </div>
        <button type="button" class="submit-btn" onclick="cancelOrRefund()">üîÑ Cancel/Refund Order</button>
      </form>
    </div>
  </div>

  <!-- Transactions Section -->
  <div class="section" id="transactionsSection">
    <h2>üìä Transactions by Date</h2>
    <div class="form-container">
      <div class="form-header">
        <h1>üìÖ Filter Transactions</h1>
        <p>Ch·ªçn kho·∫£ng ng√†y ƒë·ªÉ tra c·ª©u giao d·ªãch</p>
      </div>
      <form id="transactionsForm">
        <div class="form-group">
          <label for="transactionsStartDateInput">üìÖ Ng√†y B·∫Øt ƒê·∫ßu</label>
          <div class="input-wrapper">
            <input type="date" id="transactionsStartDateInput" name="startDate" class="form-input" required>
            <span class="icon">üìÖ</span>
          </div>
          <div class="error-message" id="transactionsStartDateError"></div>
        </div>
        <div class="form-group">
          <label for="transactionsEndDateInput">üìÖ Ng√†y K·∫øt Th√∫c</label>
          <div class="input-wrapper">
            <input type="date" id="transactionsEndDateInput" name="endDate" class="form-input" required>
            <span class="icon">üìÖ</span>
          </div>
          <div class="error-message" id="transactionsEndDateError"></div>
        </div>
        <div class="quick-select">
          <h3>üöÄ Ch·ªçn Nhanh Ng√†y</h3>
          <div class="quick-buttons">
            <button type="button" class="quick-btn" data-range="today">H√¥m nay</button>
            <button type="button" class="quick-btn" data-range="yesterday">H√¥m qua</button>
            <button type="button" class="quick-btn" data-range="lastWeek">Tu·∫ßn tr∆∞·ªõc</button>
            <button type="button" class="quick-btn" data-range="lastMonth">Th√°ng tr∆∞·ªõc</button>
          </div>
        </div>
        <button type="submit" class="submit-btn">‚ú® Xem Giao D·ªãch</button>
      </form>
    </div>
    <!-- Ph·∫ßn Filter theo tr·∫°ng th√°i -->
    <div class="filter-container" style="display: none;" id="filterContainer">
      <h3>üîç L·ªçc Theo Tr·∫°ng Th√°i</h3>
      <div class="input-wrapper">
        <button class="filter-btn" id="filterBtn" onclick="showFilterMenu()">L·ªçc</button>
        <div class="filter-menu" id="filter-menu" style="display: none;">
          <div class="filter-item" onclick="filterTransactionsByStatus('all')">T·∫•t c·∫£</div>
          <div class="filter-item" onclick="filterTransactionsByStatus('PENDING')">ƒêang ch·ªù</div>
          <div class="filter-item" onclick="filterTransactionsByStatus('CANCELLED')">ƒê√£ h·ªßy</div>
          <div class="filter-item" onclick="filterTransactionsByStatus('PAID')">ƒê√£ thanh to√°n</div>
        </div>
      </div>
    </div>

    <!-- Ph·∫ßn Search (gi·ªØ nguy√™n) -->
    <div class="search-container" style="display: none;" id="searchContainer">
      <h3>üîé T√¨m Ki·∫øm Giao D·ªãch</h3>
      <div class="input-wrapper">
        <input type="text" id="searchTransactionInput" class="form-input" placeholder="Nh·∫≠p Order ID, Transaction ID...">
        <span class="icon">üîé</span>
      </div>
      <button type="button" id="searchTransactionBtn" class="submit-btn">T√¨m Ki√™m</button>
    </div>
    <div id="transactionsResult">
      <table id="transactionsTable" style="display: none;">
        <thead>
        <tr>
          <th>Order ID</th>
          <th>Amount</th>
          <th>Payment Method</th>
          <th>Status</th>
          <th>Transaction ID</th>
          <th>Created At</th>
          <th>Updated At</th>
          <th>Action</th>
        </tr>
        </thead>
        <tbody id="transactionsBody"></tbody>
      </table>
      <div id="transactionCount" style="margin-top: 10px;"></div>
    </div>
  </div>

  <!-- Revenue Section -->
  <div class="section" id="revenueSection">
    <h2>üí∞ Total Revenue by Date</h2>
    <div class="form-container">
      <div class="form-header">
        <h1>üìÖ Revenue Analysis</h1>
        <p>Ch·ªçn kho·∫£ng ng√†y ƒë·ªÉ xem doanh thu</p>
      </div>
      <form id="revenueForm">
        <div class="form-group">
          <label for="revenueStartDateInput">üìÖ Ng√†y B·∫Øt ƒê·∫ßu</label>
          <div class="input-wrapper">
            <input type="date" id="revenueStartDateInput" name="startDate" class="form-input" required>
            <span class="icon">üìÖ</span>
          </div>
          <div class="error-message" id="revenueStartDateError"></div>
        </div>
        <div class="form-group">
          <label for="revenueEndDateInput">üìÖ Ng√†y K·∫øt Th√∫c</label>
          <div class="input-wrapper">
            <input type="date" id="revenueEndDateInput" name="endDate" class="form-input" required>
            <span class="icon">üìÖ</span>
          </div>
          <div class="error-message" id="revenueEndDateError"></div>
        </div>
        <div class="quick-select">
          <h3>üöÄ Ch·ªçn Nhanh Ng√†y</h3>
          <div class="quick-buttons">
            <button type="button" class="quick-btn" data-range="today">H√¥m nay</button>
            <button type="button" class="quick-btn" data-range="yesterday">H√¥m qua</button>
            <button type="button" class="quick-btn" data-range="lastWeek">Tu·∫ßn tr∆∞·ªõc</button>
            <button type="button" class="quick-btn" data-range="lastMonth">Th√°ng tr∆∞·ªõc</button>
          </div>
        </div>
        <button type="submit" class="submit-btn">‚ú® Xem Doanh Thu</button>
      </form>
    </div>
    <div id="revenueResult"></div>
  </div>
</div>


<!-- Th∆∞ vi·ªán Font Awesome -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<!-- Th∆∞ vi·ªán html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script src="https://momentjs.com/downloads/moment.min.js"></script>
<script src="https://momentjs.com/downloads/moment-timezone-with-data-10-years.min.js"></script>


<script>
  // H√†m showSection
  function showSection(sectionId) {
    const sections = document.querySelectorAll('.section');
    sections.forEach(section => section.classList.remove('active'));
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => link.classList.remove('active'));
    const sidebarLink = document.getElementById(`sidebar${sectionId.charAt(0).toUpperCase() + sectionId.slice(1)}`);
    if (sidebarLink) sidebarLink.classList.add('active');
    document.getElementById(`${sectionId}Section`).classList.add('active');
    if (sectionId === 'revenue') refreshRevenue();
  }

  document.getElementById("paymentBtn").addEventListener("click", processPayment);

  // T·∫£i file PDF h√≥a ƒë∆°n d·ª±a tr√™n orderId
 function downloadInvoicePdf(orderId) {
  const link = document.createElement('a');
  link.href = `${API_BASE_URL}/invoice/${orderId}/pdf`;
  link.download = `invoice_${orderId}.pdf`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}


  // Hi·ªÉn th·ªã chi ti·∫øt h√≥a ƒë∆°n t·ª´ d·ªØ li·ªáu API
  function displayInvoice(invoiceData) {
    const data = invoiceData;
    if (!data) {
      console.error('No invoice data available');
      return;
    }
    document.getElementById('invoiceId').textContent = `#${data.orderId || 'N/A'}`;
    const paymentTime = data.paymentDate ? new Date(data.paymentDate).toLocaleString('vi-VN', {
      timeZone: 'Asia/Ho_Chi_Minh',
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      hour12: false
    }) : 'N/A';
    document.getElementById('paymentDate').textContent = paymentTime;
    document.getElementById('tableNumber').textContent = data.tableNumber || 'N/A';
    document.getElementById('customerName').textContent = data.customerName || 'N/A';
    document.getElementById('displayCustomerEmail').textContent = data.customerEmail || 'N/A';
    document.getElementById('totalAmount').textContent = (data.amount || 0).toLocaleString('vi-VN') + '‚Ç´';
    document.getElementById('paymentMethodDisplay').textContent = data.paymentMethod || 'N/A';
    document.getElementById('status').textContent = data.status || 'N/A';
    document.getElementById('transactionId').textContent = data.transactionId || data.transaction_id || 'N/A';
    const tbody = document.getElementById('invoiceItems');
    tbody.innerHTML = '';
    (data.orderItems || []).forEach(item => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${item.itemName || 'N/A'}</td>
        <td>${item.quantity || 0}</td>
        <td>${(item.price || 0).toLocaleString('vi-VN')}‚Ç´</td>
        <td>${(item.quantity * (item.price || 0)).toLocaleString('vi-VN')}‚Ç´</td>
      `;
      tbody.appendChild(row);
    });
    document.getElementById('invoice').style.display = 'block';
    document.getElementById('downloadBtn').style.display = 'block';
  }

  // X√≥a t·∫•t c·∫£ th√¥ng b√°o l·ªói v√† tin nh·∫Øn
  function clearMessages() {
    const elements = ['message', 'error', 'paymentOrderIdError', 'paymentMethodError', 'customerEmailError', 'cancelOrderIdError', 'transactionsStartDateError', 'transactionsEndDateError', 'revenueStartDateError', 'revenueEndDateError'];
    elements.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.textContent = '';
    });
  }

  // Hi·ªÉn th·ªã th√¥ng b√°o l·ªói
  function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    if (errorElement) {
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    } else {
      console.error(`Element with id "${elementId}" not found`);
    }
  }

  // C·∫≠p nh·∫≠t th·ªùi gian th·ª±c tr√™n giao di·ªán
  function updateTime() {
    const now = new Date();
    document.getElementById('current-time').textContent = now.toLocaleTimeString('vi-VN');
  }
  setInterval(updateTime, 1000);
  updateTime();

  const API_BASE_URL = "http://localhost:8080/foodhub/api/cashier";

  // Chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i sidebar
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('mainContent');
    sidebar.classList.toggle('collapsed');
    mainContent.classList.toggle('expanded');
  }

  // T·∫°o hi·ªáu ·ª©ng particle ƒë·ªông
  function createParticles() {
    for (let i = 0; i < 20; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 6 + 's';
      particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
      document.body.appendChild(particle);
    }
  }
  createParticles();

  // X·ª≠ l√Ω carousel
  let currentSlideIndex = 0;
  const slides = document.querySelectorAll('.carousel-item');
  const dots = document.querySelectorAll('.nav-dot');
  const totalSlides = slides.length;

  function showSlide(index) {
    slides.forEach(slide => slide.classList.remove('active'));
    dots.forEach(dot => dot.classList.remove('active'));
    slides[index].classList.add('active');
    dots[index].classList.add('active');
  }

  function nextSlide() {
    currentSlideIndex = (currentSlideIndex + 1) % totalSlides;
    showSlide(currentSlideIndex);
  }

  function prevSlide() {
    currentSlideIndex = (currentSlideIndex - 1 + totalSlides) % totalSlides;
    showSlide(currentSlideIndex);
  }

  function currentSlide(n) {
    currentSlideIndex = n - 1;
    showSlide(currentSlideIndex);
  }

  let autoSlideInterval = setInterval(nextSlide, 5000);
  const carousel = document.querySelector('.carousel');
  carousel.addEventListener('mouseenter', () => clearInterval(autoSlideInterval));
  carousel.addEventListener('mouseleave', () => autoSlideInterval = setInterval(nextSlide, 5000));
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') prevSlide();
    else if (e.key === 'ArrowRight') nextSlide();
  });
  let touchStartX = 0;
  let touchEndX = 0;
  carousel.addEventListener('touchstart', (e) => touchStartX = e.changedTouches[0].screenX);
  carousel.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  });

  function handleSwipe() {
    if (touchEndX < touchStartX - 50) nextSlide();
    if (touchEndX > touchStartX + 50) prevSlide();
  }


  <!--=================================================================-->
  async function processPayment() {
    clearMessages();
    const orderId = parseInt(document.getElementById("paymentOrderId").value);
    const paymentMethod = document.getElementById("paymentMethod").value;
    const button = event.target;

    if (!orderId || isNaN(orderId)) {
      showError("paymentOrderIdError", "‚ùå Vui l√≤ng nh·∫≠p ID ƒë∆°n h√†ng h·ª£p l·ªá.");
      return;
    }
    if (!paymentMethod) {
      showError("paymentMethodError", "‚ùå Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n.");
      return;
    }

    const originalText = button.innerHTML;
    button.innerHTML = originalText + '<span class="loading"></span>';
    button.disabled = true;

    try {
      const response = await fetch(`${API_BASE_URL}/payment`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ orderId, paymentMethod })
      });

      const data = await response.json();

      if (response.ok) {
        const result = data.result || {};
        document.getElementById("message").textContent = "üéâ Thanh to√°n th√†nh c√¥ng!";
        document.getElementById("paymentResult").innerHTML = `
          <div class="payment-success">
            <h3>‚úÖ K·∫øt qu·∫£ thanh to√°n:</h3>
            <div class="result-info">
              <p><span>ID ƒë∆°n h√†ng:</span> ${result.orderId || 'N/A'}</p>
              <p><span>S·ªë ti·ªÅn:</span> ${(result.amount || 0).toLocaleString()}‚Ç´</p>
              <p><span>Tr·∫°ng th√°i:</span> ${result.status || 'N/A'}</p>
            </div>
          </div>
        `;

        const invoiceResponse = await fetch(`${API_BASE_URL}/invoice/${orderId}`);
        if (!invoiceResponse.ok) throw new Error(`HTTP error! status: ${invoiceResponse.status}`);

        const invoiceData = await invoiceResponse.json();
        console.log('Full Invoice Data:', JSON.stringify(invoiceData, null, 2));

        if (invoiceData.result) {
          console.log('Transaction ID from invoice:', invoiceData.result.transaction_id);
          const formattedPaymentDate = invoiceData.result.formattedPaymentDate || "N/A";
          console.log('Formatted paymentDate from API:', formattedPaymentDate);

          document.getElementById('invoiceId').textContent = invoiceData.result.orderId || 'N/A';
          document.getElementById('paymentDate').textContent = formattedPaymentDate;
          document.getElementById('tableNumber').textContent = invoiceData.result.tableNumber || 'N/A';
          document.getElementById('customerName').textContent = invoiceData.result.customerName || 'N/A';
          document.getElementById('displayCustomerEmail').textContent = invoiceData.result.customerEmail || 'N/A';
          document.getElementById('transactionId').textContent = invoiceData.result.transaction_id || (result.transactionId || 'N/A');
          document.getElementById('totalAmount').textContent = (invoiceData.result.amount || 0).toLocaleString() + '‚Ç´';
          document.getElementById('paymentMethodDisplay').textContent = invoiceData.result.paymentMethod || 'N/A';
          document.getElementById('status').textContent = invoiceData.result.status || 'N/A';

          const invoiceItems = document.getElementById('invoiceItems');
          invoiceItems.innerHTML = '';
          (invoiceData.result.orderItems || []).forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${item.itemName || 'N/A'}</td>
              <td>${item.quantity || 0}</td>
              <td>${(item.price || 0).toLocaleString()}‚Ç´</td>
              <td>${(item.total || 0).toLocaleString()}‚Ç´</td>
            `;
            invoiceItems.appendChild(row);
          });

          document.getElementById('invoice').style.display = 'block';

          const emailResponse = await fetch(`${API_BASE_URL}/send-invoice-email`, {
            method: 'POST',
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ customerEmail: invoiceData.result.customerEmail || '', orderId })
          });

          const emailResult = await emailResponse.json();
          if (emailResponse.ok) {
            document.getElementById('paymentResult').innerHTML += '<div class="success">H√≥a ƒë∆°n ƒë√£ ƒë∆∞·ª£c g·ª≠i qua email!</div>';
          } else {
            console.error('Email sending failed:', emailResult);
            document.getElementById('paymentResult').innerHTML += '<div class="error">L·ªói g·ª≠i email: ' + (emailResult.result || emailResult.message) + '</div>';
          }
        } else {
          showError("error", `‚ùå L·ªói l·∫•y h√≥a ƒë∆°n: ${invoiceData.message || 'D·ªØ li·ªáu h√≥a ƒë∆°n kh√¥ng h·ª£p l·ªá.'}`);
        }

        await refreshTransactions();
      } else {
        switch (data.code) {
          case 1019:
            showError("paymentOrderIdError", "‚ùå ƒê∆°n h√†ng kh√¥ng t·ªìn t·∫°i, vui l√≤ng ki·ªÉm tra l·∫°i ID.");
            break;
          case 1022:
            showError("paymentOrderIdError", "‚ùå Kh√¥ng t√¨m th·∫•y th√¥ng tin thanh to√°n cho ƒë∆°n h√†ng n√†y.");
            break;
          case 1026:
            showError("paymentMethodError", "‚ùå Ph∆∞∆°ng th·ª©c thanh to√°n kh√¥ng h·ª£p l·ªá, vui l√≤ng ch·ªçn l·∫°i.");
            break;
          case 1021:
            showError("paymentOrderIdError", "‚ùå ƒê∆°n h√†ng ƒë√£ thanh to√°n, kh√¥ng th·ªÉ thanh to√°n l·∫°i.");
            break;
          case 1024:
            showError("paymentOrderIdError", "‚ùå ƒê∆°n h√†ng ƒë√£ b·ªã h·ªßy, kh√¥ng th·ªÉ thanh to√°n.");
            break;
          case 1020:
            showError("paymentMethodError", "‚ùå Kh√¥ng ƒë·ªß ti·ªÅn, vui l√≤ng s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c thanh to√°n kh√°c.");
            break;
          case 1025:
            showError("paymentOrderIdError", "‚ùå Thanh to√°n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω tr∆∞·ªõc ƒë√≥.");
            break;
          case 1023:
            showError("paymentOrderIdError", "‚ùå S·ªë ti·ªÅn ƒë∆°n h√†ng kh√¥ng h·ª£p l·ªá.");
            break;
          case 9999:
            showError("error", "‚ùå L·ªói h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
            break;
          default:
            showError("error", `‚ùå ${data.message || "Thanh to√°n th·∫•t b·∫°i."}`);
            break;
        }
      }
    } catch (error) {
      console.error("L·ªói chi ti·∫øt:", error);
      showError("error", "‚ùå L·ªói k·∫øt n·ªëi h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
    } finally {
      button.innerHTML = originalText;
      button.disabled = false;
    }
  }
  // X·ª≠ l√Ω thanh to√°n ƒë∆°n h√†ng v√† g·ª≠i email h√≥a ƒë∆°n


  // X·ª≠ l√Ω h·ªßy ho·∫∑c ho√†n ti·ªÅn ƒë∆°n h√†ng
  async function cancelOrRefund() {
    clearMessages();
    const orderId = document.getElementById("cancelOrderId").value;
    const button = event.target;

    if (!orderId) {
      showError("cancelOrderIdError", "‚ùå Vui l√≤ng nh·∫≠p ID ƒë∆°n h√†ng.");
      return;
    }

    const originalText = button.innerHTML;
    button.innerHTML = originalText + '<span class="loading"></span>';
    button.disabled = true;

    try {
      const response = await fetch(`${API_BASE_URL}/cancel-or-refund/${orderId}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" }
      });
      const data = await response.json();
      if (response.ok) {
        document.getElementById("message").textContent = "‚úÖ " + (data.result || "ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c h·ªßy th√†nh c√¥ng");
        document.getElementById("message").style.display = 'block';
        await refreshTransactions();
      } else {
        switch (data.code) {
          case 1019:
            showError("cancelOrderIdError", "‚ùå ƒê∆°n h√†ng kh√¥ng t·ªìn t·∫°i.");
            break;
          case 1024:
            showError("cancelOrderIdError", "‚ùå ƒê∆°n h√†ng ƒë√£ b·ªã h·ªßy tr∆∞·ªõc ƒë√≥.");
            break;
          case 1021:
            showError("cancelOrderIdError", "‚ùå ƒê∆°n h√†ng ƒë√£ ho√†n th√†nh, kh√¥ng th·ªÉ h·ªßy.");
            break;
          case 1025:
            showError("cancelOrderIdError", "‚ùå Thanh to√°n ƒë√£ ƒë∆∞·ª£c x·ª≠ l√Ω, kh√¥ng th·ªÉ h·ªßy.");
            break;
          case 9999:
            showError("error", "‚ùå L·ªói h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
            break;
          default:
            showError("error", `‚ùå ${data.message || "H·ªßy/ho√†n ti·ªÅn th·∫•t b·∫°i."}`);
            break;
        }
      }
    } catch (error) {
      console.error("Cancel/Refund fetch error:", error);
      showError("error", "‚ùå L·ªói k·∫øt n·ªëi h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau. Chi ti·∫øt: " + (error.message || "Kh√¥ng x√°c ƒë·ªãnh"));
    } finally {
      button.innerHTML = originalText;
      button.disabled = false;
    }
  }

  // ·∫®n th√¥ng b√°o l·ªói
  function hideError(elementId) {
    const errorElement = document.getElementById(elementId);
    if (errorElement) errorElement.style.display = 'none';
  }

  // L√†m m·ªõi danh s√°ch giao d·ªãch

  // C·∫≠p nh·∫≠t refreshTransactions
// L√†m m·ªõi danh s√°ch giao d·ªãch khi ch·ªçn ng√†y
async function refreshTransactions() {
    const startDateInput = document.getElementById('transactionsStartDateInput').value;
    const endDateInput = document.getElementById('transactionsEndDateInput').value;
    const start = new Date(startDateInput);
    start.setHours(0, 0, 0, 0);
    const end = new Date(endDateInput);
    end.setHours(23, 59, 59, 999);
    const startIso = start.toISOString();
    const endIso = end.toISOString();

    try {
        const response = await fetch(`${API_BASE_URL}/transactions?start=${encodeURIComponent(startIso)}&end=${encodeURIComponent(endIso)}`);
        const data = await response.json();

        if (response.ok) {
            let transactions = data.result || [];
            const tbody = document.getElementById("transactionsBody");
            tbody.innerHTML = "";
            const transactionCount = document.getElementById("transactionCount");
            if (transactions.length > 0) {
                document.getElementById("transactionsTable").style.display = "table";
                document.getElementById("filterContainer").style.display = "block";
                document.getElementById("searchContainer").style.display = "block";
                transactions.forEach(tx => {
                    const row = document.createElement("tr");
                    let actionButtons = `
                        <button class="action-btn process-btn" onclick="selectOrder(${tx.orderId}, 'payment')">Process</button>
                        <button class="action-btn cancel-btn" onclick="selectOrder(${tx.orderId}, 'cancel')">Cancel</button>
                    `;
                    if (tx.status === "PAID") {
                        actionButtons += `
                            <button class="btn btn-outline-primary" onclick="downloadInvoicePdf(${tx.orderId})">
                                üñ®Ô∏è In H√≥a ƒê∆°n
                            </button>
                        `;
                    }
                    row.innerHTML = `
                        <td>${tx.orderId || 'N/A'}</td>
                        <td>${(tx.amount || 0).toLocaleString()}‚Ç´</td>
                        <td>${tx.paymentMethod || 'N/A'}</td>
                        <td><span style="color: ${tx.status === 'PAID' ? '#2ed573' : tx.status === 'CANCELLED' ? '#ff4757' : '#ff9800'}">${tx.status || 'N/A'}</span></td>
                        <td>${tx.transactionId || tx.transaction_id || 'N/A'}</td>
                        <td>${tx.createdAt ? new Date(tx.createdAt).toISOString().replace('T', ' ').split('.')[0] : 'N/A'}</td>
                        <td>${tx.updatedAt ? new Date(tx.updatedAt).toISOString().replace('T', ' ').split('.')[0] : 'N/A'}</td>
                        <td class="action-buttons">${actionButtons}</td>
                    `;
                    tbody.appendChild(row);
                });
                transactionCount.textContent = `T·ªïng s·ªë h√≥a ƒë∆°n: ${transactions.length}`;
            } else {
                document.getElementById("transactionsTable").style.display = "none";
                document.getElementById("filterContainer").style.display = "block";
                document.getElementById("searchContainer").style.display = "none";
                transactionCount.textContent = "Kh√¥ng c√≥ h√≥a ƒë∆°n n√†o.";
            }
        } else {
            showError("error", `‚ùå ${data.message || "Kh√¥ng th·ªÉ t·∫£i giao d·ªãch."}`);
        }
    } catch (error) {
        showError("error", "‚ùå L·ªói k·∫øt n·ªëi h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
    }
}


  // T√¨m ki·∫øm giao d·ªãch


  // C·∫≠p nh·∫≠t searchTransactions
async function searchTransactions() {
  const query = document.getElementById('searchTransactionInput').value.trim();
  if (!query) {
    showError('error', 'Vui l√≤ng nh·∫≠p Order ID ho·∫∑c Transaction ID!');
    return;
  }

  try {
    const startDateInput = document.getElementById('transactionsStartDateInput').value;
    const endDateInput = document.getElementById('transactionsEndDateInput').value;
    const start = new Date(startDateInput + 'T00:00:00Z');
    const end = new Date(endDateInput + 'T23:59:59Z');

    const response = await fetch(`${API_BASE_URL}/transactions?start=${start.toISOString()}&end=${end.toISOString()}`);
    const data = await response.json();

    if (response.ok) {
      let transactions = data.result || [];
      const tbody = document.getElementById("transactionsBody");
      tbody.innerHTML = "";
      const transactionCount = document.getElementById("transactionCount");
      transactions = transactions.filter(tx =>
        tx.orderId.toString().includes(query) ||
        (tx.transactionId && tx.transactionId.includes(query))
      );
      if (transactions.length > 0) {
        document.getElementById("transactionsTable").style.display = "table";
        document.getElementById("filterContainer").style.display = "block";
        document.getElementById("searchContainer").style.display = "block";
        transactions.forEach(tx => {
          const row = document.createElement("tr");
          let actionButtons = `
            <button class="action-btn process-btn" onclick="selectOrder(${tx.orderId}, 'payment')">Process</button>
            <button class="action-btn cancel-btn" onclick="selectOrder(${tx.orderId}, 'cancel')">Cancel</button>
          `;
          if (tx.status === "PAID") {
            actionButtons += `
              <button class="btn btn-outline-primary" onclick="downloadInvoicePdf(${tx.orderId})">
                üñ®Ô∏è In H√≥a ƒê∆°n
              </button>
            `;
          }
          row.innerHTML = `
            <td>${tx.orderId || 'N/A'}</td>
            <td>${(tx.amount || 0).toLocaleString()}‚Ç´</td>
            <td>${tx.paymentMethod || 'N/A'}</td>
            <td><span style="color: ${tx.status === 'PAID' ? '#2ed573' : tx.status === 'CANCELLED' ? '#ff4757' : '#ff9800'}">${tx.status || 'N/A'}</span></td>
            <td>${tx.transactionId || tx.transaction_id || 'N/A'}</td>
            <td>${tx.createdAt ? new Date(tx.createdAt).toISOString().replace('T', ' ').split('.')[0] : 'N/A'}</td>
            <td>${tx.updatedAt ? new Date(tx.updatedAt).toISOString().replace('T', ' ').split('.')[0] : 'N/A'}</td>
            <td class="action-buttons">${actionButtons}</td>
          `;
          tbody.appendChild(row);
        });
        transactionCount.textContent = `T·ªïng s·ªë h√≥a ƒë∆°n t√¨m th·∫•y: ${transactions.length}`;
      } else {
        document.getElementById("transactionsTable").style.display = "none";
        transactionCount.textContent = "Kh√¥ng t√¨m th·∫•y h√≥a ƒë∆°n n√†o.";
      }
    } else {
      showError("error", `‚ùå ${data.message || "Kh√¥ng th·ªÉ t√¨m ki·∫øm giao d·ªãch."}`);
    }
  } catch (error) {
    showError("error", "‚ùå L·ªói k·∫øt n·ªëi h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
  }
      if (suggestionsDiv) suggestionsDiv.style.display = 'none'; // ·∫®n g·ª£i √Ω sau khi t√¨m ki·∫øm

}


  // Hi·ªÉn th·ªã/·∫©n menu l·ªçc
  function showFilterMenu() {
    const menu = document.getElementById('filter-menu');
    if (menu.style.display === 'block') {
      menu.style.display = 'none';
    } else {
      menu.style.display = 'block';
      menu.style.position = 'absolute';
      menu.style.left = document.getElementById('filterBtn').offsetLeft + 'px';
      menu.style.top = (document.getElementById('filterBtn').offsetTop + document.getElementById('filterBtn').offsetHeight) + 'px';
    }

    setTimeout(() => {
      document.addEventListener('click', function handleOutsideClick(e) {
        if (!menu.contains(e.target) && e.target !== document.getElementById('filterBtn')) {
          menu.style.display = 'none';
          document.removeEventListener('click', handleOutsideClick);
        }
      });
    }, 0);
  }

  // L·ªçc giao d·ªãch theo tr·∫°ng th√°i
async function filterTransactionsByStatus(status) {
    const startDateInput = document.getElementById('transactionsStartDateInput').value;
    const endDateInput = document.getElementById('transactionsEndDateInput').value;
    const start = new Date(startDateInput);
    start.setHours(0, 0, 0, 0);
    const end = new Date(endDateInput);
    end.setHours(23, 59, 59, 999);
    const startIso = start.toISOString();
    const endIso = end.toISOString();

    try {
        const response = await fetch(`${API_BASE_URL}/transactions?start=${encodeURIComponent(startIso)}&end=${encodeURIComponent(endIso)}&status=${encodeURIComponent(status)}`);
        const data = await response.json();

        if (response.ok) {
            let transactions = data.result || [];
            const tbody = document.getElementById("transactionsBody");
            tbody.innerHTML = "";
            const transactionCount = document.getElementById("transactionCount");
            if (transactions.length > 0) {
                document.getElementById("transactionsTable").style.display = "table";
                document.getElementById("filterContainer").style.display = "block";
                document.getElementById("searchContainer").style.display = "block";
                transactions.forEach(tx => {
                    const row = document.createElement("tr");
                    let actionButtons = `
                        <button class="action-btn process-btn" onclick="selectOrder(${tx.orderId}, 'payment')">Process</button>
                        <button class="action-btn cancel-btn" onclick="selectOrder(${tx.orderId}, 'cancel')">Cancel</button>
                    `;
                    if (tx.status === "PAID") {
                        actionButtons += `
                            <button class="btn btn-outline-primary" onclick="downloadInvoicePdf(${tx.orderId})">
                                üñ®Ô∏è In H√≥a ƒê∆°n
                            </button>
                        `;
                    }
                    row.innerHTML = `
                        <td>${tx.orderId || 'N/A'}</td>
                        <td>${(tx.amount || 0).toLocaleString()}‚Ç´</td>
                        <td>${tx.paymentMethod || 'N/A'}</td>
                        <td><span style="color: ${tx.status === 'PAID' ? '#2ed573' : tx.status === 'CANCELLED' ? '#ff4757' : '#ff9800'}">${tx.status || 'N/A'}</span></td>
                        <td>${tx.transactionId || tx.transaction_id || 'N/A'}</td>
                        <td>${tx.createdAt ? new Date(tx.createdAt).toISOString().replace('T', ' ').split('.')[0] : 'N/A'}</td>
                        <td>${tx.updatedAt ? new Date(tx.updatedAt).toISOString().replace('T', ' ').split('.')[0] : 'N/A'}</td>
                        <td class="action-buttons">${actionButtons}</td>
                    `;
                    tbody.appendChild(row);
                });
                transactionCount.textContent = `T·ªïng s·ªë h√≥a ƒë∆°n: ${transactions.length} (ƒê√£ l·ªçc: ${status === 'all' ? 'T·∫•t c·∫£' : status.charAt(0).toUpperCase() + status.slice(1)})`;
            } else {
                document.getElementById("transactionsTable").style.display = "none";
                document.getElementById("filterContainer").style.display = "block";
                document.getElementById("searchContainer").style.display = "none";
                transactionCount.textContent = `Kh√¥ng c√≥ h√≥a ƒë∆°n n√†o v·ªõi tr·∫°ng th√°i ${status === 'all' ? 'T·∫•t c·∫£' : status.charAt(0).toUpperCase() + status.slice(1)}.`;
            }
        } else {
            showError("error", `‚ùå ${data.message || "Kh√¥ng th·ªÉ t·∫£i giao d·ªãch."}`);
        }
    } catch (error) {
        showError("error", "‚ùå L·ªói k·∫øt n·ªëi h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
    }
}

  // Ch·ªçn ƒë∆°n h√†ng ƒë·ªÉ x·ª≠ l√Ω thanh to√°n ho·∫∑c h·ªßy
  function selectOrder(orderId, section) {
    if (section === 'payment') {
      document.getElementById('paymentOrderId').value = orderId;
    } else if (section === 'cancel') {
      document.getElementById('cancelOrderId').value = orderId;
    }
    showSection(section);
  }

  // X·ª≠ l√Ω submit form ƒë·ªÉ l√†m m·ªõi giao d·ªãch
  document.getElementById('transactionsForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const button = e.submitter;
    const originalText = button.innerHTML;
    button.innerHTML = originalText + '<span class="loading"></span>';
    button.disabled = true;

    const startDateInput = document.getElementById('transactionsStartDateInput').value;
    const endDateInput = document.getElementById('transactionsEndDateInput').value;
    const startDate = new Date(startDateInput);
    const endDate = new Date(endDateInput);
    if (endDate < startDate) {
      showError('transactionsEndDateError', 'Ng√†y k·∫øt th√∫c ph·∫£i sau ng√†y b·∫Øt ƒë·∫ßu');
      button.innerHTML = originalText;
      button.disabled = false;
      return;
    } else {
      hideError('transactionsEndDateError');
    }

    await refreshTransactions();
    button.innerHTML = originalText;
    button.disabled = false;
  });

  // L·∫•y g·ª£i √Ω t√¨m ki·∫øm


 async function fetchSuggestions() {
  const query = document.getElementById('searchTransactionInput').value.trim();
  if (!query) {
    document.getElementById('suggestions').style.display = 'none';
    return;
  }

  const startDateInput = document.getElementById('transactionsStartDateInput').value;
  const endDateInput = document.getElementById('transactionsEndDateInput').value;
  const start = new Date(startDateInput + 'T00:00:00Z');
  const end = new Date(endDateInput + 'T23:59:59Z');

  try {
    const response = await fetch(`${API_BASE_URL}/transactions?start=${start.toISOString()}&end=${end.toISOString()}`);
    const data = await response.json();

    if (response.ok) {
      const transactions = data.result || [];
      const suggestions = transactions
        .filter(tx => tx.orderId.toString().includes(query) || (tx.transactionId && tx.transactionId.includes(query)))
        .map(tx => `${tx.orderId} - ${tx.transactionId || 'N/A'}`)
        .slice(0, 5); // Gi·ªõi h·∫°n 5 g·ª£i √Ω

      const suggestionsDiv = document.getElementById('suggestions');
      suggestionsDiv.innerHTML = '';
      if (suggestions.length > 0) {
        suggestions.forEach(suggestion => {
          const div = document.createElement('div');
          div.className = 'suggestion-item';
          div.textContent = suggestion;
          div.onclick = () => {
            document.getElementById('searchTransactionInput').value = suggestion.split(' - ')[0];
            suggestionsDiv.style.display = 'none';
            searchTransactions();
          };
          suggestionsDiv.appendChild(div);
        });
        suggestionsDiv.style.display = 'block';
      } else {
        suggestionsDiv.style.display = 'none';
      }
    } else {
      showError("error", `‚ùå ${data.message || "Kh√¥ng th·ªÉ t·∫£i g·ª£i √Ω."}`);
    }
  } catch (error) {
    showError("error", "‚ùå L·ªói k·∫øt n·ªëi h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
  }
}


  // L√†m m·ªõi th·ªëng k√™ doanh thu
  async function refreshRevenue() {
    const startDateInput = document.getElementById('revenueStartDateInput').value;
    const endDateInput = document.getElementById('revenueEndDateInput').value;
    const startDate = new Date(startDateInput);
    const endDate = new Date(endDateInput);
    if (endDate < startDate) {
      showError('revenueEndDateError', 'Ng√†y k·∫øt th√∫c ph·∫£i sau ng√†y b·∫Øt ƒë·∫ßu');
      return;
    } else {
      hideError('revenueEndDateError');
    }

    const start = new Date(startDateInput);
    start.setHours(0, 0, 0, 0);
    const end = new Date(endDateInput);
    end.setHours(23, 59, 59, 999);
    const startIso = start.toISOString();
    const endIso = end.toISOString();

    try {
      const response = await fetch(`${API_BASE_URL}/revenue-stats?start=${encodeURIComponent(startIso)}&end=${encodeURIComponent(endIso)}`);
      const data = await response.json();
      if (response.ok) {
        const stats = data.result || {};
        document.getElementById("revenueResult").innerHTML = `
          <div class="revenue-stats">
            <div class="stat-card">
              <h4>Total Revenue</h4>
              <div class="value">${(Number(stats.totalRevenue) || 0).toLocaleString()}‚Ç´</div>
            </div>
            <div class="stat-card">
              <h4>CASH Revenue</h4>
              <div class="value">${(Number(stats.cashRevenue) || 0).toLocaleString()}‚Ç´</div>
            </div>
            <div class="stat-card">
              <h4>VNPAY Revenue</h4>
              <div class="value">${(Number(stats.vnpayRevenue) || 0).toLocaleString()}‚Ç´</div>
            </div>
            <div class="stat-card">
              <h4>Pending</h4>
              <div class="value">${(Number(stats.pendingRevenue) || 0).toLocaleString()}‚Ç´</div>
            </div>
            <div class="stat-card">
              <h4>Paid</h4>
              <div class="value">${(Number(stats.paidRevenue) || 0).toLocaleString()}‚Ç´</div>
            </div>
            <div class="stat-card">
              <h4>Cancelled</h4>
              <div class="value">${(Number(stats.cancelledRevenue) || 0).toLocaleString()}‚Ç´</div>
            </div>
          </div>
          <p>üìÖ From: ${startDateInput} To: ${endDateInput}</p>
        `;
        document.getElementById("message").textContent = "üí∞ Revenue stats loaded successfully!";
      } else {
        showError("error", `‚ùå ${data.message || "Kh√¥ng th·ªÉ t·∫£i doanh thu."}`);
      }
    } catch (error) {
      showError("error", "‚ùå L·ªói k·∫øt n·ªëi h·ªá th·ªëng, vui l√≤ng th·ª≠ l·∫°i sau.");
    }
  }

  // X·ª≠ l√Ω submit form ƒë·ªÉ l√†m m·ªõi doanh thu
  document.getElementById('revenueForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const button = e.submitter;
    const originalText = button.innerHTML;
    button.innerHTML = originalText + '<span class="loading"></span>';
    button.disabled = true;

    const startDateInput = document.getElementById('revenueStartDateInput').value;
    const endDateInput = document.getElementById('revenueEndDateInput').value;
    const startDate = new Date(startDateInput);
    const endDate = new Date(endDateInput);
    if (endDate < startDate) {
      showError('revenueEndDateError', 'Ng√†y k·∫øt th√∫c ph·∫£i sau ng√†y b·∫Øt ƒë·∫ßu');
      button.innerHTML = originalText;
      button.disabled = false;
      return;
    } else {
      hideError('revenueEndDateError');
    }

    await refreshRevenue();
    button.innerHTML = originalText;
    button.disabled = false;
  });

  // Kh·ªüi t·∫°o trang v√† x·ª≠ l√Ω n√∫t ch·ªçn nhanh ng√†y
  document.addEventListener('DOMContentLoaded', function() {
    showSection('payment');

    const today = new Date();
    ['transactionsStartDateInput', 'transactionsEndDateInput', 'revenueStartDateInput', 'revenueEndDateInput'].forEach(id => {
      const input = document.getElementById(id);
      input.min = '2020-01-01';
      input.value = today.toISOString().split('T')[0];
    });

    document.querySelectorAll('.quick-btn[data-range]').forEach(btn => {
      btn.addEventListener('click', function() {
        const range = this.dataset.range;
        const today = new Date();
        const form = this.closest('form');
        const startDateInput = form.querySelector('[name="startDate"]');
        const endDateInput = form.querySelector('[name="endDate"]');

        if (range === 'today') {
          startDateInput.value = today.toISOString().split('T')[0];
          endDateInput.value = today.toISOString().split('T')[0];
        } else if (range === 'yesterday') {
          const yesterday = new Date(today);
          yesterday.setDate(today.getDate() - 1);
          startDateInput.value = yesterday.toISOString().split('T')[0];
          endDateInput.value = today.toISOString().split('T')[0];
        } else if (range === 'lastWeek') {
          const lastWeekStart = new Date(today);
          lastWeekStart.setDate(today.getDate() - 7);
          startDateInput.value = lastWeekStart.toISOString().split('T')[0];
          endDateInput.value = today.toISOString().split('T')[0];
        } else if (range === 'lastMonth') {
          const lastMonthStart = new Date(today);
          lastMonthStart.setDate(today.getDate() - 30);
          startDateInput.value = lastMonthStart.toISOString().split('T')[0];
          endDateInput.value = today.toISOString().split('T')[0];
        }

        form.querySelectorAll('.quick-btn[data-range]').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        document.getElementById('transactionsForm').dispatchEvent(new Event('submit'));
      });
    });

    // X·ª≠ l√Ω s·ª± ki·ªán t√¨m ki·∫øm giao d·ªãch
    document.getElementById('searchTransactionInput').addEventListener('keypress', async (event) => {
      if (event.key === 'Enter') {
        await searchTransactions();
      }
    });

    document.getElementById('searchTransactionBtn').addEventListener('click', async () => {
      await searchTransactions();
    });

    document.getElementById('filterBtn').addEventListener('click', async () => {
      await refreshTransactions();
    });
  });
</script>
</body>
</html>